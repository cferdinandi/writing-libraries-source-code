<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<title>Table of Contents</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<!-- Styles -->
		<style type="text/css">
			body {
				max-width: 40em;
				width: 88%;
				margin-left: auto;
				margin-right: auto;
			}
		</style>
	</head>

	<body>

		<h1>Example Project: Table of Contents</h1>

		<div id="toc"></div>

		<h2>Anchor's Away!</h2>

		<p>Fore furl holystone mutiny lugsail hempen halter Brethren of the Coast Corsair. Loaded to the gunwalls lookout brig hands blow the man down case shot jolly boat hempen halter. Gun gunwalls chase guns furl hornswaggle dance the hempen jig yard hail-shot. Pressgang quarterdeck prow lugger spanker fluke broadside reef.</p>

		<p>Hempen halter me gangplank snow smartly boom fire ship aft. Rope's end draught interloper schooner ho wench jury mast lateen sail. Pillage lanyard nipperkin plunder crack Jennys tea cup hogshead chantey mizzenmast. Spanker blow the man down Buccaneer Sail ho rum tender warp brigantine.</p>


		<h2>Man O' War</h2>

		<p>Man-of-war booty brigantine fire ship tack no prey, no pay wherry lee. Reef heave to line chandler fore cable smartly me. Avast list spanker Arr fathom American Main lookout grapple. Jolly boat black spot chandler list chantey pinnace brig Yellow Jack.</p>

		<p>Chantey Davy Jones' Locker snow jib careen galleon Admiral of the Black lass. Rum booty heave to grog hempen halter gangway long clothes wherry. Mutiny chase Sea Legs grapple crow's nest wherry jury mast lateen sail. Hogshead clap of thunder loot port swing the lead run a rig booty Chain Shot.</p>


		<h2>Corsair</h2>

		<p>Line Corsair haul wind pink provost hardtack keelhaul hang the jib. Splice the main brace matey hornswaggle strike colors run a shot across the bow cackle fruit hang the jib jack. Sheet bounty wherry nipperkin belay flogging Chain Shot main sheet. Lad Spanish Main barque port smartly Chain Shot deadlights Jack Ketch.</p>

		<p>Flogging heave down sloop me squiffy barkadeer loot chantey. Ye spike port lugsail belaying pin nipperkin loot yardarm. Prow gangplank six pounders chase guns pressgang chandler Shiver me timbers piracy. Hearties Shiver me timbers sloop driver fire in the hole gaff prow gally.</p>


		<h2>Scallywags be among us</h2>

		<p>Fore furl holystone mutiny lugsail hempen halter Brethren of the Coast Corsair. Loaded to the gunwalls lookout brig hands blow the man down case shot jolly boat hempen halter. Gun gunwalls chase guns furl hornswaggle dance the hempen jig yard hail-shot. Pressgang quarterdeck prow lugger spanker fluke broadside reef.</p>

		<p>Hempen halter me gangplank snow smartly boom fire ship aft. Rope's end draught interloper schooner ho wench jury mast lateen sail. Pillage lanyard nipperkin plunder crack Jennys tea cup hogshead chantey mizzenmast. Spanker blow the man down Buccaneer Sail ho rum tender warp brigantine.</p>


		<h2>The Jolly Roger</h2>

		<p>Man-of-war booty brigantine fire ship tack no prey, no pay wherry lee. Reef heave to line chandler fore cable smartly me. Avast list spanker Arr fathom American Main lookout grapple. Jolly boat black spot chandler list chantey pinnace brig Yellow Jack.</p>

		<p>Chantey Davy Jones' Locker snow jib careen galleon Admiral of the Black lass. Rum booty heave to grog hempen halter gangway long clothes wherry. Mutiny chase Sea Legs grapple crow's nest wherry jury mast lateen sail. Hogshead clap of thunder loot port swing the lead run a rig booty Chain Shot.</p>


		<h2>The Sloop</h2>

		<p>Line Corsair haul wind pink provost hardtack keelhaul hang the jib. Splice the main brace matey hornswaggle strike colors run a shot across the bow cackle fruit hang the jib jack. Sheet bounty wherry nipperkin belay flogging Chain Shot main sheet. Lad Spanish Main barque port smartly Chain Shot deadlights Jack Ketch.</p>

		<p>Flogging heave down sloop me squiffy barkadeer loot chantey. Ye spike port lugsail belaying pin nipperkin loot yardarm. Prow gangplank six pounders chase guns pressgang chandler Shiver me timbers piracy. Hearties Shiver me timbers sloop driver fire in the hole gaff prow gally.</p>


		<h2>Lost Treasure</h2>

		<p>Fore furl holystone mutiny lugsail hempen halter Brethren of the Coast Corsair. Loaded to the gunwalls lookout brig hands blow the man down case shot jolly boat hempen halter. Gun gunwalls chase guns furl hornswaggle dance the hempen jig yard hail-shot. Pressgang quarterdeck prow lugger spanker fluke broadside reef.</p>

		<p>Hempen halter me gangplank snow smartly boom fire ship aft. Rope's end draught interloper schooner ho wench jury mast lateen sail. Pillage lanyard nipperkin plunder crack Jennys tea cup hogshead chantey mizzenmast. Spanker blow the man down Buccaneer Sail ho rum tender warp brigantine.</p>


		<h2>Sea Legs</h2>

		<p>Man-of-war booty brigantine fire ship tack no prey, no pay wherry lee. Reef heave to line chandler fore cable smartly me. Avast list spanker Arr fathom American Main lookout grapple. Jolly boat black spot chandler list chantey pinnace brig Yellow Jack.</p>

		<p>Chantey Davy Jones' Locker snow jib careen galleon Admiral of the Black lass. Rum booty heave to grog hempen halter gangway long clothes wherry. Mutiny chase Sea Legs grapple crow's nest wherry jury mast lateen sail. Hogshead clap of thunder loot port swing the lead run a rig booty Chain Shot.</p>


		<h2>Barnacles and Crustaceans</h2>

		<p>Line Corsair haul wind pink provost hardtack keelhaul hang the jib. Splice the main brace matey hornswaggle strike colors run a shot across the bow cackle fruit hang the jib jack. Sheet bounty wherry nipperkin belay flogging Chain Shot main sheet. Lad Spanish Main barque port smartly Chain Shot deadlights Jack Ketch.</p>

		<p>Flogging heave down sloop me squiffy barkadeer loot chantey. Ye spike port lugsail belaying pin nipperkin loot yardarm. Prow gangplank six pounders chase guns pressgang chandler Shiver me timbers piracy. Hearties Shiver me timbers sloop driver fire in the hole gaff prow gally.</p>


		<script>
			var tableOfContents = (function () {

				'use strict';


				//
				// Variables
				//

				var publicAPIs = {};
				var headings, toc, settings;

				// Default settings
				var defaults = {
					selector: 'h2',
					target: '#toc',
					addLinks: true,
					heading: 'Table of Contents',
					callback: function () {}
				};


				//
				// Methods
				//

				/**
				 * Get the heading ID (or create one if it doesn't have one)
				 * @param  {Node}   elem The element
				 * @return {String}      The ID
				 */
				publicAPIs.getID = function (elem) {

					// If the element doesn't have an ID, create one
					if (!elem.id) {
						elem.id = elem.textContent.replace(new RegExp(' ', 'g'), '-');
					}

					// Get the element ID
					return elem.id;

				};

				/**
				 * Create the table of contents and inject it into the DOM
				 */
				var createTOC = function () {

					// Loop through all of the headings and create an array of table of content items
					var tocItems = Array.prototype.map.call(headings, function (heading) {
						if (settings.addLinks) return '<li><a href="#' + publicAPIs.getID(heading) + '">' + heading.textContent + '</a></li>';
						return '<li>' + heading.textContent + '</li>';
					});

					// Inject table of contents into the DOM
					if (toc && tocItems.length > 0) {
						toc.innerHTML =
							'<h2>' + settings.heading + '</h2>' +
							'<ul>' + tocItems.join('') + '</ul>';
					}

					// Run our callback
					settings.callback(toc);

				};

				/**
				 * Destroy the current initialization
				 */
				publicAPIs.destroy = function () {

					// Make sure plugin has been initialized
					if (!settings) return;

					// Remove the table of contents
					toc.innerHTML = '';

					// Reset variables
					headings = null;
					toc = null;
					settings = null;

				};

				/**
				 * Initialize the plugin
				 * @param  {Object} options User options and customizations
				 */
				publicAPIs.init = function (options) {

					// Destroy the current initialization
					publicAPIs.destroy();

					// Merge user options into defaults
					settings = Object.assign({}, defaults, options);

					// Get all of the headings
					headings = document.querySelectorAll(settings.selector);

					// Get the table of contents container
					toc = document.querySelector(settings.target);

					// Create the table of contents
					createTOC();

				};


				//
				// Return the Public APIs
				//

				return publicAPIs;

			})();

			// Run the script
			tableOfContents.init();
		</script>
	</body>
</html>