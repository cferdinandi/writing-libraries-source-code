<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<title>Project Template</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<!-- Styles -->
		<style type="text/css">
			body {
				margin-left: auto;
				margin-right: auto;
				max-width: 40em;
				width: 88%;
			}

			input,
			textarea {
				margin-bottom: 2em;
				width: 100%;
			}

			textarea {
				height: 12em;
			}

			/**
			 * Simple Grid
			 */

			.clearfix:before,
			.clearfix:after {
				display: table;
				content: " ";
			}

			.clearfix:after {
				clear: both;
			}

			.grid {
				box-sizing: border-box;
				float: left;
				padding: 0 3%;
				width: 50%;
			}
		</style>
	</head>

	<body>

		<h1>Type Preview</h1>

		<div class="clearfix">
			<div class="grid">
				<h2>Write Here</h2>
				<textarea class="mirror" data-mirror="#content-1"></textarea>
			</div>
			<div class="grid">
				<h2>Preview</h2>
				<div id="content-1"></div>
			</div>
		</div>

		<div class="clearfix">
			<div class="grid">
				<input type="text" class="mirror" data-mirror="#content-2">
			</div>
			<div class="grid">
				<div id="content-2"></div>
			</div>
		</div>


		<!-- Scripts -->
		<script>

			/**
			 * Element.matches() polyfill (simple version)
			 * https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill
			 */
			if (!Element.prototype.matches) {
				Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
			}

			// Setup our change events
			document.addEventListener('keyup', function () {

				// Check if the keyup/paste event happened in a field we want to mirror
				var mirror = document.activeElement;
				if (!mirror.matches('.mirror')) return;

				// Get the container to mirror our content into
				var target = document.querySelector(mirror.getAttribute('data-mirror'));
				if (!target) return;

				// Copy our field content into the container
				target.innerHTML = mirror.value.replace(/\r?\n/g, '<br>');

			}, false);

			document.addEventListener('paste', function () {

				// Check if the keyup/paste event happened in a field we want to mirror
				var mirror = document.activeElement;
				if (!mirror.matches('.mirror')) return;

				// Get the container to mirror our content into
				var target = document.querySelector(mirror.getAttribute('data-mirror'));
				if (!target) return;

				// Set a 1ms timeout to account for paste event happening before text is pasted in
				window.setTimeout(function () {

					// Copy our field content into the container
					target.innerHTML = mirror.value.replace(/\r?\n/g, '<br>');

				}, 1);

			}, false);

		</script>
	</body>
</html>